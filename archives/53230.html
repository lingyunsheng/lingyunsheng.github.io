<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lingyunsheng.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#836FFF","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ECMAScript 新特性JavaScript vs. ECMAScriptECMAScript是JavaScript的一种语法规则或者说标准，JavaScript是ECMAScript的一种实现 参考阮一峰的ECMAScript 要讲清楚这个问题，需要回顾历史。1996 年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织 ECM">
<meta property="og:type" content="article">
<meta property="og:title" content="javascript深度剖析">
<meta property="og:url" content="http://lingyunsheng.cn/archives/53230.html">
<meta property="og:site_name" content="凌云生的客栈">
<meta property="og:description" content="ECMAScript 新特性JavaScript vs. ECMAScriptECMAScript是JavaScript的一种语法规则或者说标准，JavaScript是ECMAScript的一种实现 参考阮一峰的ECMAScript 要讲清楚这个问题，需要回顾历史。1996 年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织 ECM">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-11-16T00:36:03.000Z">
<meta property="article:modified_time" content="2020-11-18T05:19:09.478Z">
<meta property="article:author" content="lingyunsheng">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://lingyunsheng.cn/archives/53230.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>javascript深度剖析 | 凌云生的客栈</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="凌云生的客栈" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">凌云生的客栈</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lingyunsheng.cn/archives/53230.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lingyunsheng">
      <meta itemprop="description" content>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="凌云生的客栈">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          javascript深度剖析
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-16 08:36:03" itemprop="dateCreated datePublished" datetime="2020-11-16T08:36:03+08:00">2020-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-18 13:19:09" itemprop="dateModified" datetime="2020-11-18T13:19:09+08:00">2020-11-18</time>
              </span>

          
          
          <br>
            <span id="/archives/53230.html" class="post-meta-item leancloud_visitors" data-flag-title="javascript深度剖析" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/archives/53230.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/archives/53230.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="ECMAScript-新特性"><a href="#ECMAScript-新特性" class="headerlink" title="ECMAScript 新特性"></a>ECMAScript 新特性</h1><h2 id="JavaScript-vs-ECMAScript"><a href="#JavaScript-vs-ECMAScript" class="headerlink" title="JavaScript vs. ECMAScript"></a>JavaScript vs. ECMAScript</h2><p>ECMAScript是JavaScript的一种语法规则或者说标准，JavaScript是ECMAScript的一种实现</p>
<p>参考阮一峰的ECMAScript</p>
<p>要讲清楚这个问题，需要回顾历史。1996 年 11 月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给标准化组织 ECMA，希望这种语言能够成为国际标准。次年，ECMA 发布 262 号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript，这个版本就是 1.0 版。</p>
<p>该标准从一开始就是针对 JavaScript 语言制定的，但是之所以不叫 JavaScript，有两个原因。一是商标，Java 是 Sun 公司的商标，根据授权协议，只有 Netscape 公司可以合法地使用 JavaScript 这个名字，且 JavaScript 本身也已经被 Netscape 公司注册为商标。二是想体现这门语言的制定者是 ECMA，不是 Netscape，这样有利于保证这门语言的开放性和中立性。</p>
<p>因此，ECMAScript 和 JavaScript 的关系是，前者是后者的规格，后者是前者的一种实现（另外的 ECMAScript 方言还有 JScript 和 ActionScript）。日常场合，这两个词是可以互换的。</p>
<h2 id="块级作用域、模板字符串"><a href="#块级作用域、模板字符串" class="headerlink" title="块级作用域、模板字符串"></a>块级作用域、模板字符串</h2><h3 id="块级作用域var-const-let与暂时性死区"><a href="#块级作用域var-const-let与暂时性死区" class="headerlink" title="块级作用域var\const\let与暂时性死区"></a>块级作用域var\const\let与暂时性死区</h3><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p>ES6新增了let命令，声明变量，用法类似var，声明的变量，再在let命令所在的代码快内有效</p>
<pre class=" language-ts"><code class="language-ts"><span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span><span class="token number">1</span>
<span class="token punctuation">}</span>
a <span class="token comment" spellcheck="true">// ReferenceError: a is not defined</span>
b <span class="token number">1</span>

<span class="token comment" spellcheck="true">// 块内定义两个变量 一个let定义的 一个定义的var变量</span>
<span class="token comment" spellcheck="true">// let定义的块级变量 在代码块外使用会报错</span>
</code></pre>
<p><strong>for</strong>循环的计数器，很适合使用<strong>let</strong>命令</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ReferenceError: a is not defined</span></code></pre>
<p>计数器<strong>i</strong>只在<strong>for</strong>循环体内有效，循环外引用就报错</p>
<blockquote>
<p>打印 1-10 用var和const执行的区别</p>
</blockquote>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// var</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//10</span>

<span class="token comment" spellcheck="true">// 使用var定义变量i 指向的是全局 </span>
<span class="token comment" spellcheck="true">// 全局只有一个var变量  这个i赋值给数组 指向全局i</span>
<span class="token comment" spellcheck="true">// 数组的每一项都是指向同一个i</span>
<span class="token comment" spellcheck="true">// 运行输出的是最后一轮i的值 输出的是10</span>


<span class="token comment" spellcheck="true">// let</span>
<span class="token keyword">var</span> a <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 6</span>

<span class="token comment" spellcheck="true">// let定义的i只在本次循环有效，每一轮都是新的值，所以输出的是6</span>
<span class="token comment" spellcheck="true">// js引擎内部会记住上一轮循环的值</span>
<span class="token comment" spellcheck="true">// 初始化i，在上一轮循环基础上计算</span>


</code></pre>
<blockquote>
<p>打印</p>
</blockquote>
<pre class=" language-ts"><code class="language-ts"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//  立即执行函数</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//  方法二 let</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// </span></code></pre>
<ul>
<li>不存在变量提升</li>
</ul>
<p><strong>var</strong>定义的变量会发生“变量提升”，当变量没有定义时使用，值为<strong>undefined</strong><br>变量提升，将var声明的变量提升到全局作用域顶层<br><strong>let</strong>命令是不存在变量提升，只有当变量声明了才可以使用, 否则抛出<strong>ReferenceError</strong>错误</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//  var的情况</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// undefined</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">2</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ReferenceError</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span><span class="token number">1</span>
</code></pre>
<ul>
<li>暂时性死区<br>块级作用域存在<strong>let命令</strong>在该块内不受外部的影响，在声明变量前对变量赋值会报错<br>在变量命令声明之前使用变量都会抛出错误，称为<strong>暂时性死区</strong>(temporal dead zone, TDZ)<br>temporal dead zone</li>
</ul>
<p>在<strong>let</strong>变量声明之前，都属于变量的<strong>死区</strong></p>
<p><strong>ES6规定暂时性死区和let、const不存在变量提升，变量声明之前变量不可以使用，声明变量之前的作用域属于暂时性死区，当变量声明之后，才可以获取使用该变量</strong></p>
<pre class=" language-js"><code class="language-js">tmp <span class="token operator">=</span><span class="token string">'123'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// referenceError</span>

<span class="token keyword">let</span> tmp<span class="token punctuation">;</span>

<span class="token keyword">typeof</span> x<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// referenceError let还没有声明就 引用类型判断</span>
<span class="token keyword">let</span> x

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span>x<span class="token operator">=</span>y<span class="token punctuation">,</span> y<span class="token operator">=</span>z<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 报错</span>

<span class="token comment" spellcheck="true">// x,y都是变量，y变量还没有声明传入，就被x变量引用，所以会报错，y变量没有声明</span>
<span class="token comment" spellcheck="true">// 还是属于死区 </span>

</code></pre>
<ul>
<li>不允许重复声明</li>
</ul>
<p><strong>let</strong>不允许在同一作用域，重复声明一个相同的变量</p>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 报错</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 报错</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<ul>
<li>const初始化 需要声明一个常量 值不可以改变 内存地址不改变就可以<h3 id="块级作用域"><a href="#块级作用域" class="headerlink" title="块级作用域"></a>块级作用域</h3>ES5只有全局作用域和函数作用域，没有块级作用域，内层变量会覆盖外层变量<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// var tmp = undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token string">'hellowrold'</span>
      <span class="token comment" spellcheck="true">// var tmp 声明的变量会提升到全局 影响外层</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
</ul>
<pre><code>用来计数的循环变量泄露为全局变量
```js
for(var i=0; i&lt;5; i++) {
    console.log(i)
}
// 输出 5 5 5 5 5
// 变量i控制循环，泄露成全局变量
</code></pre><p><strong>ES6的块级作用域</strong></p>
<p><strong>let</strong>新增了块级作用域</p>
<pre class=" language-js"><code class="language-js">
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// n=3</span>
<span class="token punctuation">}</span></code></pre>
<p>if里面有一个块级作用域 外面也有一个 互不影响 输出的3<br><strong>ES6允许块级作用域嵌套</strong></p>
<pre class=" language-ts"><code class="language-ts"><span class="token punctuation">{</span>
    <span class="token keyword">let</span> name <span class="token operator">=</span><span class="token string">'aaa'</span>
    <span class="token punctuation">{</span><span class="token keyword">let</span> name <span class="token operator">=</span><span class="token string">'aqaaa'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>ES5的块级作用域通过立即执行函数（匿名函数）实现的</strong><br><strong>IIFE</strong></p>
<pre class=" language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">//  块级作用域</span>

<span class="token punctuation">{</span>
    <span class="token keyword">let</span> tmp <span class="token operator">=</span> <span class="token operator">...</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>ES6支持在块级作用域中声明函数</strong></p>
<ul>
<li>允许在块级作用域内声明函数。</li>
<li>函数声明类似于var，即会提升到全局作用域或函数作用域的头部。</li>
<li>同时，函数声明还会提升到所在的块级作用域的头部。</li>
</ul>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 块级作用域内部，优先使用函数表达式</span>
<span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'secret'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p><strong>const</strong>声明一个只读的常量， 一旦声明， 常量的值就不能改变</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> PI <span class="token operator">=</span> <span class="token number">3.1415</span>
PI <span class="token comment" spellcheck="true">// 3.1415</span>

PI <span class="token operator">=</span> <span class="token number">3</span>

<span class="token comment" spellcheck="true">//  typeerror 不能改变</span></code></pre>
<p><strong>const</strong>作用域块级作用域，只在声明所在的块级作用域有效</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> MAX <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

MAX <span class="token comment" spellcheck="true">// Uncaught ReferenceError: MAX is not defined</span></code></pre>
<p><strong>const</strong>不存在变量提升，暂时性死区问题Temporal dead zone TDZ, 只能在<br>变量声明之后使用</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>MAX<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError</span>
  <span class="token keyword">const</span> MAX <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p><strong>const</strong>声明的常量不可以重复声明</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">"Hello!"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 以下两行都会报错</span>
<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">"Goodbye!"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h4><p><strong>const</strong>声明的是一个常量变量不可以改变，指的是变量指向的那个内存地址<br>所保存到数据类型不得改动，对于简单数据类型都存储在栈中，，值就保存在<br>变量指向的内存地址，而如果变量指向的是对象类型，那么指向的就是一个指针<br>地址不变就行</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 为 foo 添加一个属性，可以成功</span>
foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span>prop <span class="token comment" spellcheck="true">// 123</span>

<span class="token comment" spellcheck="true">// 将 foo 指向另一个对象，就会报错</span>
foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// TypeError: "foo" is read-only</span></code></pre>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 可执行</span>
a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 可执行</span>
a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dave'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 报错</span></code></pre>
<p>上面代码中，常量a是一个数组，这个数组本身是可写的，但是如果将另一个数组赋值给a，就会报错。</p>
<p>如果真的想将对象冻结，应该使用<strong>Object.freeze</strong>方法。</p>
<p><strong>Object.freeze方法冻结</strong></p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> foo <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">123</span> <span class="token comment" spellcheck="true">// 对象被冻结无法操作</span>

<span class="token comment" spellcheck="true">//  对象冻结</span>

<span class="token keyword">var</span> freezes <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">freezes</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>ES5 只有两种声明变量的方法：var命令和function命令。ES6 除了添加let和const命令，后面章节还会提到，另外两种声明变量的方法：import命令和class命令。所以，ES6 一共有 6 种声明变量的方法。</p>
<h3 id="顶层对象的属性"><a href="#顶层对象的属性" class="headerlink" title="顶层对象的属性"></a>顶层对象的属性</h3><p>顶层对象，在浏览器环境指的是window对象，在 Node 指的是global对象。ES5 之中，顶层对象的属性与全局变量是等价的。</p>
<pre class=" language-js"><code class="language-js">window<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
a <span class="token comment" spellcheck="true">// 1</span>

a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>a <span class="token comment" spellcheck="true">// 2</span>
</code></pre>
<p>window对象有实体含义，指的是浏览器的窗口对象，var命令和function命令声明的全局变量，依旧是顶层对象的属性；另一方面规定，let命令、const命令、class命令声明的全局变量，不属于顶层对象的属性。也就是说，从 ES6 开始，全局变量将逐步与顶层对象的属性脱钩。</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 如果在 Node 的 REPL 环境，可以写成 global.a</span>
<span class="token comment" spellcheck="true">// 或者采用通用方法，写成 this.a</span>
window<span class="token punctuation">.</span>a <span class="token comment" spellcheck="true">// 1</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>b <span class="token comment" spellcheck="true">// undefined</span>
</code></pre>
<p>var声明的变量全局变量 顶层对象就是window</p>
<p>let声明的全局变量 不与顶层对象挂钩 所以window.b = undefined</p>
<h3 id="globalThis"><a href="#globalThis" class="headerlink" title="globalThis"></a>globalThis</h3><p>JavaScript 语言存在一个顶层对象，它提供全局环境（即全局作用域），所有代码都是在这个环境中运行。但是，顶层对象在各种实现里面是不统一的。</p>
<ul>
<li><p>浏览器里面，顶层对象是window，但 Node 和 Web Worker 没有window。</p>
</li>
<li><p>浏览器和 Web Worker 里面，self也指向顶层对象，但是 Node 没有self。</p>
</li>
<li><p>Node 里面，顶层对象是global，但其他环境都不支持。<br>同一段代码为了能够在各种环境，都能取到顶层对象，现在一般是使用this变量，但是有局限性。</p>
</li>
<li><p>全局环境中，this会返回顶层对象。但是，Node.js 模块中this返回的是当前模块，ES6 模块中this返回的是undefined。</p>
</li>
<li><p>函数里面的this，如果函数不是作为对象的方法运行，而是单纯作为函数运行，this会指向顶层对象。但是，严格模式下，这时this会返回undefined。</p>
</li>
<li><p>不管是严格模式，还是普通模式，new Function(‘return this’)()，总是会返回全局对象。但是，如果浏览器用了 CSP（Content Security Policy，内容安全策略），那么eval、new Function这些方法都可能无法使用。<br>综上所述，很难找到一种方法，可以在所有情况下，都取到顶层对象。下面是两种勉强可以使用的方法。</p>
</li>
</ul>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 方法一</span>
<span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span>
   <span class="token operator">?</span> window
   <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> process <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">typeof</span> require <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">typeof</span> global <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
     <span class="token operator">?</span> global
     <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 方法二</span>
<span class="token keyword">var</span> getGlobal <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> self<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> window<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> global<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unable to locate global object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre>
<h2 id="对象与数组的解构、rest-操作符"><a href="#对象与数组的解构、rest-操作符" class="headerlink" title="对象与数组的解构、rest 操作符"></a>对象与数组的解构、rest 操作符</h2><h3 id="变量的结构赋值"><a href="#变量的结构赋值" class="headerlink" title="变量的结构赋值"></a>变量的结构赋值</h3><h3 id="函数的扩展"><a href="#函数的扩展" class="headerlink" title="函数的扩展"></a>函数的扩展</h3><h3 id="数组的扩展-扩展运算符"><a href="#数组的扩展-扩展运算符" class="headerlink" title="数组的扩展 扩展运算符"></a>数组的扩展 扩展运算符</h3><h2 id="函数进阶（箭头函数、默认参数）"><a href="#函数进阶（箭头函数、默认参数）" class="headerlink" title="函数进阶（箭头函数、默认参数）"></a>函数进阶（箭头函数、默认参数）</h2><h2 id="对象和数组的扩展用法"><a href="#对象和数组的扩展用法" class="headerlink" title="对象和数组的扩展用法"></a>对象和数组的扩展用法</h2><h2 id="Proxy、Reflect、Map、Set、Symbol"><a href="#Proxy、Reflect、Map、Set、Symbol" class="headerlink" title="Proxy、Reflect、Map、Set、Symbol"></a>Proxy、Reflect、Map、Set、Symbol</h2><h2 id="for…of、迭代器模式、生成器函数"><a href="#for…of、迭代器模式、生成器函数" class="headerlink" title="for…of、迭代器模式、生成器函数"></a>for…of、迭代器模式、生成器函数</h2><h2 id="ES-Modules-模块系统"><a href="#ES-Modules-模块系统" class="headerlink" title="ES Modules 模块系统"></a>ES Modules 模块系统</h2><h2 id="ES2016-ES2020（ES7-ES11）特性一览"><a href="#ES2016-ES2020（ES7-ES11）特性一览" class="headerlink" title="ES2016 - ES2020（ES7 - ES11）特性一览"></a>ES2016 - ES2020（ES7 - ES11）特性一览</h2><h2 id="新特性编译工具（Babel）的使用"><a href="#新特性编译工具（Babel）的使用" class="headerlink" title="新特性编译工具（Babel）的使用"></a>新特性编译工具（Babel）的使用</h2><h2 id="新特性的-Polyfill：CoreJS-标准库"><a href="#新特性的-Polyfill：CoreJS-标准库" class="headerlink" title="新特性的 Polyfill：CoreJS 标准库"></a>新特性的 Polyfill：CoreJS 标准库</h2><h1 id="JavaScript-异步编程"><a href="#JavaScript-异步编程" class="headerlink" title="JavaScript 异步编程"></a>JavaScript 异步编程</h1><p>JavaScript 的单线程设计<br>同步模式和异步模式的调用差异<br>回调函数的执行原理<br>Promise 异步方案的使用进阶与剖析<br>处理异步任务的任务队列和事件循环<br>JavaScript 内部的宏任务与微任务<br>ES 6 Generator 迭代器的异步应用<br>使用 Async / Await 语法糖编写扁平的异步代码</p>
<h1 id="TypeScript-高级编程"><a href="#TypeScript-高级编程" class="headerlink" title="TypeScript 高级编程"></a>TypeScript 高级编程</h1><h2 id="编程语言的几种不同类型系统"><a href="#编程语言的几种不同类型系统" class="headerlink" title="编程语言的几种不同类型系统"></a>编程语言的几种不同类型系统</h2><h2 id="JavaScript-自有类型系统的问题"><a href="#JavaScript-自有类型系统的问题" class="headerlink" title="JavaScript 自有类型系统的问题"></a>JavaScript 自有类型系统的问题</h2><h2 id="Flow-静态类型检查方案"><a href="#Flow-静态类型检查方案" class="headerlink" title="Flow 静态类型检查方案"></a>Flow 静态类型检查方案</h2><blockquote>
<p><strong><a href="https://flow.org/" target="_blank" rel="external nofollow noopener noreferrer" target_blank>Flow-JS</a></strong>静态类型检查工具，类型检查，提高代码健壮性和可阅读性，Fackbook出品的<br>Flow提供了另一个新的选项，它是一种强(静态)类型的辅助检查工具。Flow的功能是让现有的JavaScript语法可以事先作类型的声明(定义)，在开发过程中进行自动检查，当然在最后编译时，一样可以用babel工具来移除这些标记。</p>
</blockquote>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// @flow</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> number <span class="token operator">|</span> boolean<span class="token punctuation">)</span><span class="token punctuation">:</span> number <span class="token operator">|</span> string <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">10</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">'x is boolean'</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 这一行有类型错误消息</span>
</code></pre>
<h2 id="Flow-工具的配置及相关插件的使用"><a href="#Flow-工具的配置及相关插件的使用" class="headerlink" title="Flow 工具的配置及相关插件的使用"></a>Flow 工具的配置及相关插件的使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li>直接从Flow的发布页面下载可运行档案，加到计算机中的PATH(路径)，让flow指令可以在命令列窗口访问即可。</li>
<li>透过npm安装即可，可以安装在全局(global)或是各别项目中。下面为安装在项目中的指令:<pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev flow-bin
</code></pre>
</li>
</ul>
<pre><code>- macOS中可以使用homebrew安装:
```js
macOS中可以使用homebrew安装:
brew update
brew install flow</code></pre><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li>初始化项目</li>
</ul>
<p><strong>.flowconfig</strong>文档</p>
<pre class=" language-bash"><code class="language-bash">flow init</code></pre>
<ul>
<li>在代码文档加入要作类型检查的注释<br>一般都在代码档案的最上面一行加入，没加Flow工具是不会进行检查的，有两种格式都可以:</li>
</ul>
<pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// @flow</span>

<span class="token comment" spellcheck="true">/*@flow*/</span></code></pre>
<ul>
<li>类型检查</li>
</ul>
<pre class=" language-js"><code class="language-js">
flow check

npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev babel<span class="token operator">-</span>plugin<span class="token operator">-</span>transform<span class="token operator">-</span>flow<span class="token operator">-</span>strip<span class="token operator">-</span>types
</code></pre>
<h3 id="支持的数据类型"><a href="#支持的数据类型" class="headerlink" title="支持的数据类型"></a>支持的数据类型</h3><p>Flow用起来是的确是简单，但里面的内容很多，主要原因是是要看实际不同的使用情况作搭配。JavaScript里面的原始数据类型都有支持，而在函数、对象与一些新的ES6中的类，在搭配使用时就会比较复杂，详细的情况就请到官网文档中观看，以下只能提供一些简单的介绍说明。</p>
<p>原始数据类型<br>Flow支持原始数据类型，如下面的列表:</p>
<p>boolean<br>number<br>string<br>null<br>void<br>其中的void类型，它就是JS中的undefined类型。</p>
<p>其余和<strong>TypeScript一样</strong></p>
<h2 id="TypeScript-基本语法"><a href="#TypeScript-基本语法" class="headerlink" title="TypeScript 基本语法"></a>TypeScript 基本语法</h2><h2 id="TypeScript-高级特性（泛型、接口）"><a href="#TypeScript-高级特性（泛型、接口）" class="headerlink" title="TypeScript 高级特性（泛型、接口）"></a>TypeScript 高级特性（泛型、接口）</h2><h2 id="TypeScript-内置对象标准库"><a href="#TypeScript-内置对象标准库" class="headerlink" title="TypeScript 内置对象标准库"></a>TypeScript 内置对象标准库</h2><h2 id="TypeScript-的类型声明"><a href="#TypeScript-的类型声明" class="headerlink" title="TypeScript 的类型声明"></a>TypeScript 的类型声明</h2><h1 id="函数式编程范式"><a href="#函数式编程范式" class="headerlink" title="函数式编程范式"></a>函数式编程范式</h1><p>函数式编程的本质以及应用场景<br>如何以函数式编程风格创建应用程序<br>用简单的代码构建复杂的应用程序<br>纯函数的定义以及为什么使用纯函数<br>为什么消除和控制副作用如此重要<br>柯里化、compose、高阶函数的优点<br>不可变的数据结构<br>常见库（Lodash、Ramda.js）</p>
<h1 id="JavaScript-性能优化"><a href="#JavaScript-性能优化" class="headerlink" title="JavaScript 性能优化"></a>JavaScript 性能优化</h1><p>JavaScript 中的垃圾收集<br>JavaScript 内存管理<br>V8 垃圾回收机制分类<br>引用计数、标记清除、标记整理和增量标记<br>Preformance 工具的使用及注意事项<br>20 个代码层面的优化细节</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="防抖和节流"><a href="#防抖和节流" class="headerlink" title="防抖和节流"></a>防抖和节流</h2><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//  实现防抖函数</span>
<span class="token comment" spellcheck="true">//  防抖 和节流都是 处理高频率事件</span>
<span class="token comment" spellcheck="true">//  函数防抖 一段时间触发了 重新计算时间清除事件</span>
<span class="token comment" spellcheck="true">//  输入框和 search搜索联想，用户在不断输入值时，用防抖来节约请求资源。</span>
<span class="token comment" spellcheck="true">// window触发resize的时候，不断的调整浏览器窗口大小会不断的触发这个事件，用防抖来让其只触发一次</span>
<span class="token comment" spellcheck="true">//  resize 窗口大小</span>
<span class="token keyword">const</span> debounce <span class="token operator">=</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> wait<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 定义一个定时器</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//  清除时间</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">searchList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2222'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span>searchList<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">//  节流函数： 一段时间出发了，判断当前时间和上一次时间 大于则执行 一段时间只执行一次</span>
<span class="token comment" spellcheck="true">//  节流 鼠标不断点击 mousedown 监听滚动事件判断是否加载更多 throttle</span>
<span class="token keyword">const</span> throttle <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//  获取this</span>
        <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> arguments
        <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>now<span class="token operator">-</span>prev <span class="token operator">></span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//  加上时间戳的节流函数</span>
<span class="token keyword">const</span> throttles <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token keyword">var</span> args <span class="token operator">=</span> arguments
  <span class="token keyword">var</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//  超过时间可以执行</span>
 <span class="token keyword">if</span><span class="token punctuation">(</span>now<span class="token operator">-</span>prev <span class="token operator">></span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// 没有超过 则继续等待</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token operator">-</span>prev<span class="token operator">-</span>now<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">mousedown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'鼠标点击了'</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouse-over'</span><span class="token punctuation">,</span> <span class="token function">throttles</span><span class="token punctuation">(</span>mousedown<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h1 id="encodeURIComponent-函数和encodeURI-通用资源标识符"><a href="#encodeURIComponent-函数和encodeURI-通用资源标识符" class="headerlink" title="encodeURIComponent()函数和encodeURI 通用资源标识符"></a>encodeURIComponent()函数和encodeURI 通用资源标识符</h1><ul>
<li>encodeURIComponent() 函数可把字符串作为 URI 组件进行编码。</li>
</ul>
<p>把字符串作为URI组件进行编码<br>该方法不会对ASCII字母和数字进行编码 也不会对ASCII符号进行编码<br>其他字符也都是由ASCII进行编码的 会对一些?:/@进行编码</p>
<pre class=" language-ts"><code class="language-ts"><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// 使用encodeURIComponent()对uri进行编码</span>
<span class="token keyword">var</span> uri <span class="token operator">=</span> <span class="token string">'https://m.zxxk.com/paper?stageId=4&amp;subjectId=10'</span>

<span class="token function">encodeURICompnent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span>

https
</code></pre>
<ul>
<li>encodeURI</li>
</ul>
<p>把字符串作为URI进行编码</p>

    </div>

    
    
    

    <div>
	    
		    
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
   <!-- JS库 sweetalert 引用本地路径 -->
  <script src="/js/sweetalert.min.js"></script>
  <p><span>文章作者:</span><a href="/" title="访问 lingyunsheng 的个人博客">lingyunsheng</a></p>
  <p><span>发布时间:</span>2020年11月16日 - 08:11</p>
  <p><span>原始链接:</span><a href="/archives/53230.html" title="javascript深度剖析">http://lingyunsheng.cn/archives/53230.html</a>
    <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://lingyunsheng.cn/archives/53230.html" aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
      $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
        });
    });  
</script>


	    
    </div>
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="lingyunsheng 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="lingyunsheng 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>lingyunsheng
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://lingyunsheng.cn/archives/53230.html" title="javascript深度剖析">http://lingyunsheng.cn/archives/53230.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，感兴趣的话，前往git，转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/archives/33441.html" rel="prev" title="前端大挑战">
      <i class="fa fa-chevron-left"></i> 前端大挑战
    </a></div>
      <div class="post-nav-item">
    <a href="/archives/24710.html" rel="next" title="核心框架原理与进阶">
      核心框架原理与进阶 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ECMAScript-新特性"><span class="nav-text">ECMAScript 新特性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript-vs-ECMAScript"><span class="nav-text">JavaScript vs. ECMAScript</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#块级作用域、模板字符串"><span class="nav-text">块级作用域、模板字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#块级作用域var-const-let与暂时性死区"><span class="nav-text">块级作用域var\const\let与暂时性死区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#let"><span class="nav-text">let</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#块级作用域"><span class="nav-text">块级作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#const"><span class="nav-text">const</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#本质"><span class="nav-text">本质</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#顶层对象的属性"><span class="nav-text">顶层对象的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#globalThis"><span class="nav-text">globalThis</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象与数组的解构、rest-操作符"><span class="nav-text">对象与数组的解构、rest 操作符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#变量的结构赋值"><span class="nav-text">变量的结构赋值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数的扩展"><span class="nav-text">函数的扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的扩展-扩展运算符"><span class="nav-text">数组的扩展 扩展运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数进阶（箭头函数、默认参数）"><span class="nav-text">函数进阶（箭头函数、默认参数）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象和数组的扩展用法"><span class="nav-text">对象和数组的扩展用法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Proxy、Reflect、Map、Set、Symbol"><span class="nav-text">Proxy、Reflect、Map、Set、Symbol</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#for…of、迭代器模式、生成器函数"><span class="nav-text">for…of、迭代器模式、生成器函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ES-Modules-模块系统"><span class="nav-text">ES Modules 模块系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ES2016-ES2020（ES7-ES11）特性一览"><span class="nav-text">ES2016 - ES2020（ES7 - ES11）特性一览</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新特性编译工具（Babel）的使用"><span class="nav-text">新特性编译工具（Babel）的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新特性的-Polyfill：CoreJS-标准库"><span class="nav-text">新特性的 Polyfill：CoreJS 标准库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript-异步编程"><span class="nav-text">JavaScript 异步编程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TypeScript-高级编程"><span class="nav-text">TypeScript 高级编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#编程语言的几种不同类型系统"><span class="nav-text">编程语言的几种不同类型系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScript-自有类型系统的问题"><span class="nav-text">JavaScript 自有类型系统的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flow-静态类型检查方案"><span class="nav-text">Flow 静态类型检查方案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flow-工具的配置及相关插件的使用"><span class="nav-text">Flow 工具的配置及相关插件的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装"><span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用"><span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#支持的数据类型"><span class="nav-text">支持的数据类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript-基本语法"><span class="nav-text">TypeScript 基本语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript-高级特性（泛型、接口）"><span class="nav-text">TypeScript 高级特性（泛型、接口）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript-内置对象标准库"><span class="nav-text">TypeScript 内置对象标准库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript-的类型声明"><span class="nav-text">TypeScript 的类型声明</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数式编程范式"><span class="nav-text">函数式编程范式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaScript-性能优化"><span class="nav-text">JavaScript 性能优化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他"><span class="nav-text">其他</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#防抖和节流"><span class="nav-text">防抖和节流</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#encodeURIComponent-函数和encodeURI-通用资源标识符"><span class="nav-text">encodeURIComponent()函数和encodeURI 通用资源标识符</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lingyunsheng" src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">lingyunsheng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">19</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lingyunsheng" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lingyunsheng" rel="external nofollow noopener noreferrer" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1841046698@qq.com" title="E-Mail → mailto:1841046698@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.im/user/729731451849134" title="掘金 → https:&#x2F;&#x2F;juejin.im&#x2F;user&#x2F;729731451849134" rel="external nofollow noopener noreferrer" target="_blank"><i class="heartbeat fa-fw"></i>掘金</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lingyunsheng</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">62k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">56 分钟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
  <span id="busuanzi_container_site_pv">
    本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次
  </span>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"BRxjPOsqhLpeBGnhnWu544t6-MdYXbMMI","app_key":"sjOlGST3QNba2IdputiNyNBq","server_url":null,"security":true,"betterPerformance":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'BRxjPOsqhLpeBGnhnWu544t6-MdYXbMMI',
      appKey     : 'sjOlGST3QNba2IdputiNyNBq',
      placeholder: "Just go go",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>


</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>
<!-- 爆炸烟花 -->
<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas> 
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
<script type="text/javascript" src="/js/src/firework.js"></script>

<!--浏览器搞笑标题-->
<script type="text/javascript" src="/js/src/FunnyTitle.js"></script>

<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', () => {
  let icon = document.querySelector(".github-corner");
  icon.innerHTML  = `<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD;color:#fff;aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body">
      </path>
  </svg>`;
},false);
</script>



